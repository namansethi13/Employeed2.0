{% extends 'mcq_app/base.html' %} 


{% block content %}

<section id="jobdashboard" class="d-flex felx-coloumn">
   <div class="container">
      <div class="row justify-content-center">
         <div class="col">
            <div class="card mask-custom">
               <div class="card-body pt-0 pb-2 px-4">
                  <div class="my-4">
                     <div class="row bg-dark mx-0 px-2 py-1 d-flex justify-content-center align-items-center">
                        <div class="col text-white display-6 text-start">
                           Jobs List
                        </div>
                        <div class="col text-end">
                           <a href="{% url 'job_create' %}" class="btn btn-success"
                        >Add Job</a
                     >
                        </div>
                     </div>
                     <!-- <a href="{% url 'test_list' %}" class="btn btn-primayr"
                        >All Tests</a
                     > -->

                     <table class="table table-striped">
                        <thead class = "bg-grayish text-white">
                           <tr>
                              <th scope="col" class = "border-end">#</th>
                              <th scope="col"class = "border-end">Job Name</th>
                              <th scope="col"class = "border-end">Description</th>
                              <th scope="col"class = "border-end">Skills</th>
                              <th scope="col"class = "border-end">Start Date</th>
                              <th scope="col"class = "border-end">End Date</th>
                              <th scope="col"class = "border-end">Status</th>
                              <th colspan = "2">Operations</th>
                           </tr>
                        </thead>
                        <tbody>
                           {% for object in object_list %}
                           <tr>
                              <th scope="row" class = "text-dark">{{forloop.counter}}</th>
                              <td>
                                 <a class ="joblistlinks" href="{% url 'job_detail' object.id %}"
                                    >{{object.job_name}}</a
                                 >
                              </td>
                              <td class = "text-dark">{{object.job_description}}</td>
                              <td class = "text-dark">
                                 {% for skill in object.skills.all %}
                                    {{skill}},
                                 {% endfor %}
                              </td>
                              <td class="text-dark">
                                 {{object.start_date}}
                              </td>
                              <td class="text-dark">
                                 {{object.end_date}}
                              </td>

                              {% if object.post_it == "PRIVATE" %}
                              <td>
                                 <button class="form-control btn-primary btn-sm"><a href="{% url 'job_post' object.id %}" > Post it</a></button>
                                 </td>
                              {% else %}
                                 <td class = "text-dark">{{object.post_it}}</td>
                              {% endif %}
                              <td>
                                 <button class = "btn btn-primary btn-sm" id = "updatebtn">
                                 <a class = "updatebtn"
                                    href="{% url 'job_update' object.id %}"
                                    class="btn btn-primary"
                                    >Update</a>
                                    </button>
                              </td>
                              <td>

<button id = "deletebtn" class = "btn btn-primary btn-sm" data-mdb-toggle="modal" data-mdb-target="#confirmdelete{{forloop.counter}}" data-mdb-whatever = "{{object.job_name}}">
                           Delete
                        </button>

                                 <div class="modal fade" id="confirmdelete{{forloop.counter}}" tabindex="-1" aria-labelledby="confirmdeletlabel" aria-hidden="true">
                           <div class="modal-dialog modal-dialog-centered">
                              <div class="modal-content">
                                 <div class="modal-header">
                                    <h5 class="modal-title text-danger" id="confirmdeletlabel">Confirm Delete?</h5>
                                       <button type="button" class="btn-close" data-mdb-dismiss="modal" aria-label="Close"></button>
                                 </div>
                                 <div class="modal-body text-start">
                                    <p id="modaltext">
                                       Are You sure you want to Delete <b>{{object.job_name}}</b> Job Opening?
                                    </p>
                                 </div>
                                 <div class="modal-footer">
                                    <div class="col text-start">
                                    <button type="button" class="btn btn-primary btn-success" data-mdb-dismiss="modal">Cancel</button>
                                    </div>
                                    <div class="col text-end">
                                       <a
                                    href="{% url 'job_delete' object.id %}"
                                    class="btn btn-danger"
                                    >Delete</a
                                 >
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </div>




                                 
                              </td>
                           </tr>
                           {% endfor %}
                        </tbody>
                     </table>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
</section>



<script>
 //  updatebtn = document.querySelectorAll(".updatebtn");
//   let today = new Date().toISOString().slice(0, 10);

   //updatebtn = document.getElementById("updatebtn");
   //deletbtn = document.getElementById("deletebtn");

//   if(today <= "{{")


</script>


{% endblock content %}
